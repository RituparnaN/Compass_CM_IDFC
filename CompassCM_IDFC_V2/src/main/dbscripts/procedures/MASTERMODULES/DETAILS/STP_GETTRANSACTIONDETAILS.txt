CREATE OR REPLACE PROCEDURE STP_GETTRANSACTIONDETAILS(
i_vcTransactionNo IN VARCHAR2,		i_vcUserCode     IN VARCHAR2, 
i_vcGroupCode     IN VARCHAR2,		i_vcIPAddress    IN VARCHAR2,	   
io_cuResultSet1   IN OUT SYS_REFCURSOR,	io_cuResultSet2  IN OUT SYS_REFCURSOR,
io_cuResultSet3   IN OUT SYS_REFCURSOR
-- EXEC STP_GETTRANSACTIONDETAILS('1','','','',:RC1,:RC2,:RC3);
)
AS

vcSql VARCHAR2(32000);
BEGIN
 DELETE FROM COMAML.C;
 INSERT INTO COMAML.C VALUES('i_vcTransactionNo: '||i_vcTransactionNo);
 COMMIT;
   OPEN io_cuResultSet1 FOR
 SELECT 'Transaction Details' AS TABNAMES
   FROM DUAL;

   OPEN io_cuResultSet2 FOR
 SELECT 'D' AS TABDISPLAY
  FROM DUAL;
  
   OPEN io_cuResultSet3 FOR
 SELECT TRANSACTIONNO, FUN_DATETOCHAR(TRANSACTIONDATETIME) TRANSACTIONDATETIME, TRANSACTIONID, TRANSACTIONTYPE, ACCOUNTNO, BRANCHCODE,
 		CUSTOMERID, CUSTOMERNAME, DEPOSITORWITHDRAWAL, AMOUNT, CURRENCYCODE, ACCTCURRENCYCODE,
 		INSTRUMENTCODE, INSTRUMENTNO, FUN_DATETOCHAR(INSTRUMENTDATE) INSTRUMENTDATE, FLOWCODE, PRODUCTCODE, CONVERSIONRATE, NARRATION,
 		CHANNELID, CHANNELTYPE, COUNTERPARTYID, COUNTERPARTYNAME, COUNTERACCOUNTNO, COUNTERPARTYTYPE,
 		COUNTERBRANCHCODE, COUNTERBANKCODE, COUNTERPARTYADDRESS, COUNTERCOUNTRYCODE, PURPOSEOFREMITTANCECODE,
 		FUN_DATETOCHAR(PSTD_DATE) PSTD_DATE, MCCCODE, REF_AMT, SOURCESYSTEM
   FROM COMAML.TB_TRANSACTIONS
  WHERE TRANSACTIONNO = i_vcTransactionNo ;
   
END STP_GETTRANSACTIONDETAILS;
/
   