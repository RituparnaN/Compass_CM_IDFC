creating modules:

REM INSERTING into TB_MODULE
SET DEFINE OFF;
INSERT INTO COMAML_CM.TB_MODULE (MODULECODE,MODULENAME,MAINORSUBMODULE,MAINMODULECODE,MODULEURL,DISPLAYORDER,ISMULTIPLE,UPDATEDBY,UPDATETIMESTAMP,MENUTYPE,ICONNAME) 
VALUES ('riskAssessmentNew','Risk Assessment New','M','riskAssessmentNew','common/riskAssessmentNew',4500,'1','SYSTEM',SYSTIMESTAMP,'V',null);

COMMIT;

REM INSERTING into QDE2.TB_ROLEMODULEMAPPING
SET DEFINE OFF;
Insert into COMAML_CM.TB_ROLEMODULEMAPPING (MODULECODE,ROLEID,UPDATEDBY,UPDATETIMESTAMP,ISENABLED) values ('riskAssessmentNew','CM_OFFICER','SYSTEM',SYSTIMESTAMP,'Y');

COMMIT;

REM INSERTING into QDE2.TB_ROLEMODULEMAPPING
SET DEFINE OFF;
Insert into COMAML_CM.TB_ROLEMODULEMAPPING (MODULECODE,ROLEID,UPDATEDBY,UPDATETIMESTAMP,ISENABLED) values ('riskAssessmentNew','CM_MANAGER','SYSTEM',SYSTIMESTAMP,'Y');

COMMIT;

INSERT INTO COMAML_CM.TB_MODULE (MODULECODE,MODULENAME,MAINORSUBMODULE,MAINMODULECODE,MODULEURL,DISPLAYORDER,ISMULTIPLE,UPDATEDBY,UPDATETIMESTAMP,MENUTYPE,ICONNAME) 
VALUES ('rfiPendingCasesNew','Pending Cases New','M','rfiPendingCasesNew','common/riskAssessmentPendingCasesNew',4500,'1','SYSTEM',SYSTIMESTAMP,'V',null);

COMMIT;

REM INSERTING into QDE2.TB_ROLEMODULEMAPPING
SET DEFINE OFF;
Insert into COMAML_CM.TB_ROLEMODULEMAPPING (MODULECODE,ROLEID,UPDATEDBY,UPDATETIMESTAMP,ISENABLED) values ('rfiPendingCasesNew','CM_MAKER','SYSTEM',SYSTIMESTAMP,'Y');

COMMIT;
SET DEFINE OFF;
Insert into COMAML_CM.TB_ROLEMODULEMAPPING (MODULECODE,ROLEID,UPDATEDBY,UPDATETIMESTAMP,ISENABLED) values ('rfiPendingCasesNew','CM_CHECKER','SYSTEM',SYSTIMESTAMP,'Y');

COMMIT;


REM INSERTING into TB_MODULE
SET DEFINE OFF;
INSERT INTO COMAML_CM.TB_MODULE (MODULECODE,MODULENAME,MAINORSUBMODULE,MAINMODULECODE,MODULEURL,DISPLAYORDER,ISMULTIPLE,UPDATEDBY,UPDATETIMESTAMP,MENUTYPE,ICONNAME) 
VALUES ('questionnaireMasterNew','Questionnaire Master New','M','questionnaireMasterNew','common/questionnaireMasterNew',4500,'1','SYSTEM',SYSTIMESTAMP,'V',null);

COMMIT;

REM INSERTING into QDE2.TB_ROLEMODULEMAPPING
SET DEFINE OFF;
Insert into COMAML_CM.TB_ROLEMODULEMAPPING (MODULECODE,ROLEID,UPDATEDBY,UPDATETIMESTAMP,ISENABLED) values ('questionnaireMasterNew','CM_ADMINMAKER','SYSTEM',SYSTIMESTAMP,'Y');

COMMIT;

Insert into COMAML_CM.TB_MASTERMODULESEARCHCONFIG (MODULESEQNO,MODULECODE,SEARCHPROCEDURENAME,DETAILPROCEDURENAME,UPDATEDBY,UPDATETIMESTAMP) values (142,'riskAssessmentViewComments','STP_GETCMCASEWORKFLOWCOMMENTS','STP_GETCMCASEWORKFLOWCOMMENTS','SYSTEM',to_timestamp('16-07-21 09:01:36.983000000 PM','DD-MM-RR HH12:MI:SSXFF AM'));
Insert into COMAML_CM.TB_MASTERMODULESEARCHCONFIG (MODULESEQNO,MODULECODE,SEARCHPROCEDURENAME,DETAILPROCEDURENAME,UPDATEDBY,UPDATETIMESTAMP) values (141,'riskAssessmentPendingCases','STP_RISKASSESS_GETPENDINGCASES','STP_RISKASSESS_GETPENDINGCASES','SYSTEM',to_timestamp('16-07-21 09:15:16.793000000 PM','DD-MM-RR HH12:MI:SSXFF AM'));
Insert into COMAML_CM.TB_MASTERMODULESEARCHCONFIG (MODULESEQNO,MODULECODE,SEARCHPROCEDURENAME,DETAILPROCEDURENAME,UPDATEDBY,UPDATETIMESTAMP) values (143,'rfiPendingCasesNew','STP_RISKASSESS_GETPENDCASESN','STP_RISKASSESS_GETPENDINGCASES','SYSTEM',to_timestamp('16-07-21 09:15:16.793000000 PM','DD-MM-RR HH12:MI:SSXFF AM'));
Insert into COMAML_CM.TB_MASTERMODULESEARCHCONFIG (MODULESEQNO,MODULECODE,SEARCHPROCEDURENAME,DETAILPROCEDURENAME,UPDATEDBY,UPDATETIMESTAMP) values (144,'riskAssessmentViewCommentsNew','STP_GETCMCASEWORKFLOWCOMMENTSN','STP_GETCMCASEWORKFLOWCOMMENTS','SYSTEM',to_timestamp('16-07-21 09:01:36.983000000 PM','DD-MM-RR HH12:MI:SSXFF AM'));

Insert into COMAML_CM.TB_MASTERMODULESEARCHCONFIG (MODULESEQNO,MODULECODE,SEARCHPROCEDURENAME,DETAILPROCEDURENAME,UPDATEDBY,UPDATETIMESTAMP) values (140,'riskAssessmentQuestionList','STP_SEARCHRISKASSESSMENTQSTN',null,'SYSTEM',to_timestamp('12-04-21 12:21:42.666000000 PM','DD-MM-RR HH12:MI:SSXFF AM'));


Insert into COMAML_CM.TB_MODULEPARAMETERS (MODULECODE,MODULENAME,MODULEPARAMNAME,MODULEPARAMALIASNAME,MODULEPARAMIDNAME,MODULEPARAMINDEX,MODULEPARAMDATATYPE,MODULEPARAMVIEWNAME,MODULEPARAMSTATICVALUES,MODULEPARAMDEFAULTVALUE,MODULEPARAMVALIDATIONFIELD,MODULEPARAMVALIDATIONTYPE,UPDATEDBY,UPDATETIMESTAMP,SEARCHMULTIPLESELECT) values ('riskAssessmentPendingCases','Pending Case','app.common.FROMDATE','From Date','FROMDATE',1,'date',null,null,null,null,null,'SYSTEM',to_timestamp('03-10-16 12:17:10.988000000 PM','DD-MM-RR HH12:MI:SSXFF AM'),'N');
Insert into COMAML_CM.TB_MODULEPARAMETERS (MODULECODE,MODULENAME,MODULEPARAMNAME,MODULEPARAMALIASNAME,MODULEPARAMIDNAME,MODULEPARAMINDEX,MODULEPARAMDATATYPE,MODULEPARAMVIEWNAME,MODULEPARAMSTATICVALUES,MODULEPARAMDEFAULTVALUE,MODULEPARAMVALIDATIONFIELD,MODULEPARAMVALIDATIONTYPE,UPDATEDBY,UPDATETIMESTAMP,SEARCHMULTIPLESELECT) values ('riskAssessmentPendingCases','Pending Case','app.common.TODATE','To Date','TODATE',2,'date',null,null,null,null,null,'SYSTEM',to_timestamp('03-10-16 12:17:11.034000000 PM','DD-MM-RR HH12:MI:SSXFF AM'),'N');
Insert into COMAML_CM.TB_MODULEPARAMETERS (MODULECODE,MODULENAME,MODULEPARAMNAME,MODULEPARAMALIASNAME,MODULEPARAMIDNAME,MODULEPARAMINDEX,MODULEPARAMDATATYPE,MODULEPARAMVIEWNAME,MODULEPARAMSTATICVALUES,MODULEPARAMDEFAULTVALUE,MODULEPARAMVALIDATIONFIELD,MODULEPARAMVALIDATIONTYPE,UPDATEDBY,UPDATETIMESTAMP,SEARCHMULTIPLESELECT) values ('riskAssessmentPendingCases','Pending Case','app.common.CM_QUESTIONNO','Question No','CM_QUESTIONNO',3,'text',null,null,null,null,null,'SYSTEM',to_timestamp('03-10-16 12:17:11.088000000 PM','DD-MM-RR HH12:MI:SSXFF AM'),'N');
Insert into COMAML_CM.TB_MODULEPARAMETERS (MODULECODE,MODULENAME,MODULEPARAMNAME,MODULEPARAMALIASNAME,MODULEPARAMIDNAME,MODULEPARAMINDEX,MODULEPARAMDATATYPE,MODULEPARAMVIEWNAME,MODULEPARAMSTATICVALUES,MODULEPARAMDEFAULTVALUE,MODULEPARAMVALIDATIONFIELD,MODULEPARAMVALIDATIONTYPE,UPDATEDBY,UPDATETIMESTAMP,SEARCHMULTIPLESELECT) values ('riskAssessmentPendingCases','Pending Case','app.common.CM_QUESTION','Question','CM_QUESTION',4,'text',null,null,null,null,null,'SYSTEM',to_timestamp('03-10-16 12:17:11.106000000 PM','DD-MM-RR HH12:MI:SSXFF AM'),'N');
Insert into COMAML_CM.TB_MODULEPARAMETERS (MODULECODE,MODULENAME,MODULEPARAMNAME,MODULEPARAMALIASNAME,MODULEPARAMIDNAME,MODULEPARAMINDEX,MODULEPARAMDATATYPE,MODULEPARAMVIEWNAME,MODULEPARAMSTATICVALUES,MODULEPARAMDEFAULTVALUE,MODULEPARAMVALIDATIONFIELD,MODULEPARAMVALIDATIONTYPE,UPDATEDBY,UPDATETIMESTAMP,SEARCHMULTIPLESELECT) values ('riskAssessmentPendingCases','Pending Case','app.common.FROMCASENO','From CaseNo','FROMCASENO',9,'text',null,null,null,null,null,'SYSTEM',to_timestamp('03-10-16 12:17:11.163000000 PM','DD-MM-RR HH12:MI:SSXFF AM'),'N');
Insert into COMAML_CM.TB_MODULEPARAMETERS (MODULECODE,MODULENAME,MODULEPARAMNAME,MODULEPARAMALIASNAME,MODULEPARAMIDNAME,MODULEPARAMINDEX,MODULEPARAMDATATYPE,MODULEPARAMVIEWNAME,MODULEPARAMSTATICVALUES,MODULEPARAMDEFAULTVALUE,MODULEPARAMVALIDATIONFIELD,MODULEPARAMVALIDATIONTYPE,UPDATEDBY,UPDATETIMESTAMP,SEARCHMULTIPLESELECT) values ('riskAssessmentPendingCases','Pending Case','app.common.TOCASENO','To CaseNo','TOCASENO',10,'text',null,null,null,null,null,'SYSTEM',to_timestamp('03-10-16 12:17:11.180000000 PM','DD-MM-RR HH12:MI:SSXFF AM'),'N');


---------------------------------------------------------------------------------------------------

   CREATE TABLE "COMAML_CM"."TB_RISKASSESSQUESTIONSCONFIG" 
   (	"QUESTIONID" VARCHAR2(400 BYTE), 
	"QUESTION" VARCHAR2(4000 BYTE), 
	"INPUTTYPE" VARCHAR2(400 BYTE), 
	"INPUTOPTIONSLIST" VARCHAR2(4000 BYTE), 
	"ISSUPERPARENT" VARCHAR2(1 BYTE), 
	"HASPARENT" VARCHAR2(1 BYTE), 
	"PARENTQSIDS" VARCHAR2(4000 BYTE), 
	"HASRISKIMPACT" VARCHAR2(1 BYTE), 
	"ASSESSMENTUNIT" VARCHAR2(400 BYTE), 
	"CATEGORY" VARCHAR2(400 BYTE), 
	"SUBCATEGORY" VARCHAR2(400 BYTE), 
	"UPDATETIMESTAMP" TIMESTAMP (6), 
	"ISENABLED" VARCHAR2(10 BYTE), 
	"INPUTOPTIONSLISTFORNUMERIC" VARCHAR2(4000 BYTE), 
	"SUBSUBCATEG" VARCHAR2(4000 BYTE),
	"CREATEDBY" VARCHAR2(400 BYTE),
	"COMMENTS" CLOB,
	"CREATEDON" VARCHAR2(200 BYTE)
   );

  CREATE TABLE "COMAML_CM"."TB_RARISKRATINGS" 
   (	"CMREFNO" VARCHAR2(400 BYTE), 
	"CATEGORY" VARCHAR2(400 BYTE), 
	"SUBCATEGORY" VARCHAR2(400 BYTE), 
	"INHERENTRISKRATING" VARCHAR2(400 BYTE), 
    "SYSGENRISKRATING" VARCHAR2(400 BYTE), 
    "PROVRISKRATING" VARCHAR2(400 BYTE), 
    "FINALRISKRATING" VARCHAR2(400 BYTE), 
    "REASONFORDEVIATION" CLOB,
	 "ASSESSMENTUNIT" VARCHAR2(400 BYTE),
	"UPDATEDTIMESTAMP" TIMESTAMP (6)
   );
	

CREATE TABLE "COMAML_CM"."TB_RAQUESTIONRESPONSES" 
   (	"CMREFNO" VARCHAR2(400 BYTE), 
	"QUESTIONID" VARCHAR2(20 BYTE), 
	"QINPUT" CLOB, 
	"QRESULT" VARCHAR2(400 BYTE), 
	"QIMPACTCRITERIA" VARCHAR2(20 BYTE), 
	"QLIKELYHOOD" VARCHAR2(20 BYTE), 
	"QDESIGNRATING" VARCHAR2(20 BYTE), 
	"QOPERATINGRATING" VARCHAR2(20 BYTE), 
	"QOBSERVATION" CLOB, 
	"QDOCREFSAMTESTING" CLOB, 
	"UPDATEDTIMESTAMP" TIMESTAMP (6), 
	"ASSESSMENTUNIT" VARCHAR2(400 BYTE), 
	"QINHERENTRISK" VARCHAR2(20 BYTE)
   ) ;


CREATE TABLE "COMAML_CM"."TB_RAFORMGENERALDETAILS" 
   (	"CMREFNO" VARCHAR2(400 BYTE), 
	"ASSESSMENTUNIT" VARCHAR2(400 BYTE), 
	"ASSESSMENTPERIOD" VARCHAR2(400 BYTE), 
	"POCNAME" VARCHAR2(400 BYTE), 
	"POCEMAIL" VARCHAR2(400 BYTE), 
	"COMPLIANCE1" VARCHAR2(4000 BYTE), 
	"COMPLIANCE2" VARCHAR2(4000 BYTE), 
	"BUSINESS1" VARCHAR2(4000 BYTE), 
	"BUSINESS2" VARCHAR2(4000 BYTE), 
	"OTHER1" VARCHAR2(4000 BYTE), 
	"OTHER2" VARCHAR2(4000 BYTE), 
	"KEYBUSINESSNAME1" VARCHAR2(4000 BYTE), 
	"KEYBUSINESSNAME2" VARCHAR2(4000 BYTE), 
	"KEYBUSINESSNAME3" VARCHAR2(4000 BYTE), 
	"KEYBUSINESSROLE1" VARCHAR2(4000 BYTE), 
	"KEYBUSINESSROLE2" VARCHAR2(4000 BYTE), 
	"KEYBUSINESSROLE3" VARCHAR2(4000 BYTE), 
	"FORMSTATUS" VARCHAR2(400 BYTE), 
	"CMOFFICERCODE" VARCHAR2(400 BYTE), 
	"CMOFFICERTIMESTAMP" TIMESTAMP (6), 
	"CMOFFICERCOMMENTS" VARCHAR2(4000 BYTE), 
	"CMMANAGERCODE" VARCHAR2(400 BYTE), 
	"CMMANAGERTIMESTAMP" TIMESTAMP (6), 
	"CMMANAGERCOMMENTS" VARCHAR2(4000 BYTE), 
	"UPDATEDTIMESTAMP" TIMESTAMP (6), 
	"FORMDATA" CLOB
   );



  CREATE TABLE "COMAML_CM"."TB_RAFORMCOMMENTSLOG" 
   (	"CMREFNO" VARCHAR2(400 BYTE), 
	"ASSESSMENTUNIT" VARCHAR2(400 BYTE), 
	"USERNAME" VARCHAR2(400 BYTE), 
	"USERROLE" VARCHAR2(400 BYTE), 
	"COMMENTS" CLOB, 
	"UPDATEDTIMESTAMP" TIMESTAMP (6)
   );
 

CREATE TABLE "COMAML_CM"."TB_CMQUES_CASEWORKFLOWDETAILS" 
   (	"CASENO" VARCHAR2(1000 BYTE), 
	"CASEID" VARCHAR2(1000 BYTE), 
	"CASESTATUS" VARCHAR2(2 BYTE), 
	"RFISTATUS" VARCHAR2(100 BYTE), 
	"MAKERDUEDATE" TIMESTAMP (6), 
	"CHECKERDUEDATE" TIMESTAMP (6), 
	"ASSIGNEDMAKERCODE" VARCHAR2(1000 BYTE), 
	"ASSIGNEDCHECKERCODES" VARCHAR2(1000 BYTE), 
	"CURRENT_CASESTATUS" VARCHAR2(2 BYTE), 
	"CURRENT_USERCODE" VARCHAR2(1000 BYTE), 
	"CURRENT_USERROLE" VARCHAR2(1000 BYTE), 
	"PREVIOUS_CASESTATUS" VARCHAR2(2 BYTE), 
	"PREVIOUS_USERCODE" VARCHAR2(1000 BYTE), 
	"PREVIOUS_USERROLE" VARCHAR2(1000 BYTE), 
	"UPDATEDTIMESTAMP" TIMESTAMP (6), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"CHECKERCOUNT" NUMBER, 
	"CHECKERREVIEWCOUNT" NUMBER, 
	"ESCALATIONOPTIONS" VARCHAR2(4000 BYTE), 
	"ESCALATIONREMARKS" VARCHAR2(4000 BYTE), 
	"ESCALATIONCHECKERLIST" VARCHAR2(4000 BYTE), 
	"ESCALATIONCOMMETNS" VARCHAR2(4000 BYTE), 
	"ESCALATEDTO" VARCHAR2(4000 BYTE), 
	"COMPASSREFNO" VARCHAR2(4000 BYTE)
   );

CREATE TABLE "COMAML_CM"."TB_RISKASSESSCWFCOMMENTSLOG" 
   (	"CASENO" VARCHAR2(100 BYTE), 
	"SEQUENCENO" NUMBER(10,0), 
	"QUESTIONID" VARCHAR2(2000 BYTE), 
	"USERCODE" VARCHAR2(100 BYTE), 
	"USERROLE" VARCHAR2(100 BYTE), 
	"IPADDRESS" VARCHAR2(100 BYTE), 
	"CASESTATUS" VARCHAR2(100 BYTE), 
	"COMMENTS" VARCHAR2(4000 BYTE), 
	"FRAUDINDICATOR" VARCHAR2(1000 BYTE), 
	"REMOVALREASONCODE" VARCHAR2(1000 BYTE), 
	"OUTCOMEINDICATOR" VARCHAR2(1000 BYTE), 
	"HIGHRISKREASONCODE" VARCHAR2(1000 BYTE), 
	"ADDEDTOFALSEPOSITIVE" VARCHAR2(100 BYTE), 
	"LASTREVIEWEDDATE" TIMESTAMP (6), 
	"ADDEDTOMARKALL" VARCHAR2(10 BYTE), 
	"UPDATEMESSAGE" VARCHAR2(1000 BYTE), 
	"UPDATEDBY" VARCHAR2(100 BYTE), 
	"UPDATETIMESTAMP" TIMESTAMP (6), 
	"ASSIGNEDUSERCODE" VARCHAR2(100 BYTE), 
	"SEARCHCASENO" VARCHAR2(4000 BYTE), 
	"REASSIGNTOUSERCODE" VARCHAR2(100 BYTE), 
	"FIUREFERENCEUPDATEDATE" VARCHAR2(100 BYTE), 
	"FIUREFERENCENO" VARCHAR2(100 BYTE), 
	"USERACTIONTYPE" VARCHAR2(100 BYTE), 
	"USERBRANCHCODE" VARCHAR2(100 BYTE), 
	"COMPASSREFNO" VARCHAR2(4000 BYTE)
   );

CREATE TABLE "COMAML_CM"."TB_CMGENRLFINALRISKDETAILS" 
   (	"CREFNUM" VARCHAR2(1000 BYTE), 
	"ASSESSMENTUNIT" VARCHAR2(100 BYTE), 
	"ASSESSMENTPERIOD" VARCHAR2(100 BYTE), 
	"POCNAME" VARCHAR2(100 BYTE), 
	"POCEMAIL" VARCHAR2(100 BYTE), 
	"COMPLIANCE1" VARCHAR2(100 BYTE), 
	"BUSINESS1" VARCHAR2(100 BYTE), 
	"OTHER1" VARCHAR2(100 BYTE), 
	"KEYBUSINESSNAME1" VARCHAR2(1000 BYTE), 
	"KEYBUSINESSROLE1" VARCHAR2(1000 BYTE), 
	"KEYBUSINESSNAME2" VARCHAR2(1000 BYTE), 
	"KEYBUSINESSROLE2" VARCHAR2(1000 BYTE), 
	"KEYBUSINESSNAME3" VARCHAR2(1000 BYTE), 
	"KEYBUSINESSROLE3" VARCHAR2(1000 BYTE), 
	"CUSTOMERSYSTEMGENRISK" VARCHAR2(100 BYTE), 
	"CUSTOMERPROVISRISK" VARCHAR2(100 BYTE), 
	"CUSTOMERFINALRISK" VARCHAR2(100 BYTE), 
	"CUSTOMERREMARKS" VARCHAR2(4000 BYTE), 
	"GEOGSYSTEMGENRISK" VARCHAR2(100 BYTE), 
	"GEOGPROVISRISK" VARCHAR2(100 BYTE), 
	"GEOGFINALRISK" VARCHAR2(100 BYTE), 
	"GEOGREMARKS" VARCHAR2(4000 BYTE), 
	"PRODUCTSSYSTEMGENRISK" VARCHAR2(100 BYTE), 
	"PRODUCTSPROVISRISK" VARCHAR2(100 BYTE), 
	"PRODUCTSFINALRISK" VARCHAR2(100 BYTE), 
	"PRODUCTSREMARKS" VARCHAR2(4000 BYTE), 
	"DELIVERYSYSTEMGENRISK" VARCHAR2(100 BYTE), 
	"DELIVERYPROVISRISK" VARCHAR2(100 BYTE), 
	"DELIVERYFINALRISK" VARCHAR2(100 BYTE), 
	"DELIVERYREMARKS" VARCHAR2(4000 BYTE), 
	"TRANSACTIONSSYSTEMGENRISK" VARCHAR2(100 BYTE), 
	"TRANSACTIONSPROVISRISK" VARCHAR2(100 BYTE), 
	"TRANSACTIONSFINALRISK" VARCHAR2(100 BYTE), 
	"TRANSACTIONSREMARKS" VARCHAR2(4000 BYTE), 
	"CONTROLSYSTEMGENRISK" VARCHAR2(100 BYTE), 
	"CONTROLPROVISRISK" VARCHAR2(100 BYTE), 
	"CONTROLFINALRISK" VARCHAR2(100 BYTE), 
	"NEXTREVIEWDATE" VARCHAR2(100 BYTE), 
	"CMOFFICERCODE" VARCHAR2(100 BYTE), 
	"CMOFFICERUPDATETIMESTAMP" TIMESTAMP (6), 
	"CMMANAGERCODE" VARCHAR2(100 BYTE), 
	"CMMNGERUPDATETIMESTAMP" TIMESTAMP (6), 
	"STATUS" VARCHAR2(5 BYTE), 
	"CMOFFICERCOMMENTS" VARCHAR2(4000 BYTE), 
	"CMMANAGERCOMMENTS" VARCHAR2(4000 BYTE), 
	"LOGTIMESTAMP" TIMESTAMP (6), 
	"COMPLIANCE2" VARCHAR2(100 BYTE), 
	"BUSINESS2" VARCHAR2(100 BYTE), 
	"OTHER2" VARCHAR2(100 BYTE), 
	"CONTROLREMARKS" VARCHAR2(4000 BYTE), 
	"RESIDUALSYSTEMGENRISK" VARCHAR2(100 BYTE), 
	"RESIDUALPROVRISK" VARCHAR2(100 BYTE), 
	"RESIDUALFINALRISK" VARCHAR2(100 BYTE), 
	"RESIDUALREMARKS" VARCHAR2(100 BYTE), 
	"TOTINHSYSGENRISK" VARCHAR2(100 BYTE), 
	"TOTINHPROVISRISK" VARCHAR2(100 BYTE), 
	"TOTINHFINALRISK" VARCHAR2(100 BYTE), 
	"TOTCONTPARSYSGENRISK" VARCHAR2(100 BYTE), 
	"TOTCONTPARPROVISRISK" VARCHAR2(100 BYTE), 
	"TOTCONTPARFINALRISK" VARCHAR2(100 BYTE)
   );
-----------------------------------------------------------------------------------------------

create or replace PROCEDURE             "STP_GETRISKASSESSQSDATANEW" 
(
  i_vcQuestionId          IN VARCHAR2,          i_vcStatus      		IN VARCHAR2,
  i_vcUserCode        IN VARCHAR2,         
  i_vcUserRole            IN VARCHAR2,          i_vcIPAddress    		IN VARCHAR2,
  io_cuResultSet1         IN OUT SYS_REFCURSOR  -- io_cuResultSet2  		IN OUT SYS_REFCURSOR
--io_cuResultSet3       IN OUT SYS_REFCURSOR
)

AS

  vcQuery VARCHAR2(5000);
  vcQuery1 VARCHAR2(5000);
  --vcStatus VARCHAR2(4) :='A';
BEGIN


OPEN io_cuResultSet1 FOR
SELECT QUESTIONID, QUESTION, INPUTTYPE, INPUTOPTIONSLIST 
  FROM TB_RISKASSESSQUESTIONSCONFIG 
 WHERE QUESTIONID = i_vcQuestionId
 ORDER BY QUESTIONID;



END STP_GETRISKASSESSQSDATANEW;
----------------------------------------------------------------------------------------------

create or replace PROCEDURE "STP_GETCMCASEWORKFLOWCOMMENTS" (
i_vcCaseNo        IN VARCHAR2,          i_vcActionType    IN VARCHAR2,
i_vcCaseStatus    IN VARCHAR2,          i_vcUserCode      IN VARCHAR2,
i_vcCompassRefNo      IN VARCHAR2,      
i_vcGroupCode     IN VARCHAR2,          i_vcIPAddress     IN VARCHAR2,
io_cuResultSet1   IN OUT SYS_REFCURSOR, io_cuResultSet2   IN OUT SYS_REFCURSOR,
io_cuResultSet3   IN OUT SYS_REFCURSOR, io_cuResultSet4   IN OUT SYS_REFCURSOR,
io_cuResultSet5   IN OUT SYS_REFCURSOR, io_cuResultSet6   IN OUT SYS_REFCURSOR
--io_cuResultSet7   IN OUT SYS_REFCURSOR
--EXEC STP_GETCASEWORKFLOWCOMMENTS('59639074','','','','','', :RC1, :RC2, :RC3, :RC4, :RC5, :RC6);
)
AS
vcSql VARCHAR2(32000);
BEGIN
/*
  OPEN io_cuResultSet1 FOR
SELECT CASE WHEN i_vcGroupCode IN ('ROLE_USER')                             THEN 'COMMENTSLOG^~^BUSINESSUSER'
            WHEN i_vcGroupCode IN ('ROLE_AMLUSERL1', 'ROLE_AMLUSERL2')      THEN 'COMMENTSLOG^~^BUSINESSUSER^~^AMLUSER^~^AMLO'
            WHEN i_vcGroupCode IN ('ROLE_AMLUSERL3', 'ROLE_AMLO')           THEN 'COMMENTSLOG^~^BUSINESSUSER^~^AMLUSER^~^AMLO'
            WHEN i_vcGroupCode IN ('ROLE_MLRO','ROLE_MLROL1','ROLE_MLROL2') THEN 'COMMENTSLOG^~^USER^~^AMLUSER^~^AMLO^~^MLRO'
            ELSE 'COMMENTSLOG^~^BUSINESSUSER^~^AMLUSER^~^AMLO^~^MLRO'
        END AS TABNAMES
  FROM DUAL;

  OPEN io_cuResultSet2 FOR
SELECT CASE WHEN i_vcGroupCode IN ('ROLE_USER')                             THEN 'T^~^D'
            WHEN i_vcGroupCode IN ('ROLE_AMLUSERL1', 'ROLE_AMLUSERL2')      THEN 'T^~^D^~^D^~^D'
            WHEN i_vcGroupCode IN ('ROLE_AMLUSERL3', 'ROLE_AMLO')           THEN 'T^~^D^~^D^~^D'
            WHEN i_vcGroupCode IN ('ROLE_MLRO','ROLE_MLROL1','ROLE_MLROL2') THEN 'T^~^D^~^D^~^D^~^D'
            ELSE 'T^~^D^~^D^~^D^~^D'
        END AS TABDISPLAY
  FROM DUAL;
*/
IF(i_vcActionType LIKE '%viewComments%') THEN
IF(i_vcUserCode LIKE '%OFFICER%') THEN

 OPEN io_cuResultSet1 FOR
SELECT 'CM_OFFICER^~^CM_MAKER^~^CM_CHECKER^~^COMMENTSLOG' TABNAMES
  FROM DUAL;

  OPEN io_cuResultSet2 FOR
SELECT 'D^~^D^~^D^~^T' TABDISPLAY
  FROM DUAL;

 OPEN io_cuResultSet3 FOR
SELECT SEQUENCENO, USERCODE, USERROLE, IPADDRESS,
       A.CASESTATUS,

       A.COMMENTS, 
       /*
       REMOVALREASONCODE,
       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
       LASTREVIEWEDDATE, ADDEDTOMARKALL,
       UPDATEMESSAGE,
       */
       A.USERCODE AS UPDATEDBY, TO_CHAR(UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
  FROM TB_RISKASSESSCWFCOMMENTSLOG A
 WHERE A.QUESTIONID = i_vcCaseNo AND A.USERROLE = 'ROLE_CM_OFFICER' AND A.COMPASSREFNO = i_vcCompassRefNo 
 ORDER BY SEQUENCENO DESC;

 OPEN io_cuResultSet4 FOR
SELECT A.* FROM
(
SELECT A.SEQUENCENO, A.USERCODE, A.USERROLE, A.IPADDRESS,
       A.CASESTATUS, B.ESCALATIONOPTIONS,B.ESCALATEDTO,
       A.COMMENTS,
       /*
       REMOVALREASONCODE,
       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
       LASTREVIEWEDDATE, ADDEDTOMARKALL,
       UPDATEMESSAGE,
       */
       A.USERCODE AS UPDATEDBY, TO_CHAR(A.UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
  FROM TB_RISKASSESSCWFCOMMENTSLOG A
  LEFT OUTER JOIN tb_cmques_caseworkflowdetails B ON a.questionid = b.caseid
 WHERE A.QUESTIONID = i_vcCaseNo
   AND A.USERROLE IN ('ROLE_CM_MAKER') AND A.COMPASSREFNO = i_vcCompassRefNo  -- ,'AMLUSERL3','36','37')
 --AND A.CASESTATUS NOT IN ('4','5','6','11','990','2000','2001')
-- UNION ALL
--SELECT SEQUENCENO, USERCODE, USERROLE, IPADDRESS,
--       A.CASESTATUS,
--       COMMENTS,
--       /*
--       REMOVALREASONCODE,
--       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
--       LASTREVIEWEDDATE, ADDEDTOMARKALL,
--       UPDATEMESSAGE,
--       */
--       UPDATEDBY, TO_CHAR(UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
--  FROM TB_RISKASSESSCWFCOMMENTSLOG A
--  --LEFT OUTER JOIN TB_CASESTATUSMASTER B ON A.CASESTATUS = B.CASESTATUS
-- WHERE A.CASENO = i_vcCaseNo
--   AND A.USERROLE IN ('ROLE_CM_CHECKER')
--   --AND A.CASESTATUS NOT IN ('4','5','6','11','990','36','37','51','10000000')
) A
 ORDER BY SEQUENCENO DESC;

  OPEN io_cuResultSet5 FOR
SELECT A.SEQUENCENO, A.USERCODE, A.USERROLE, A.IPADDRESS,
       A.CASESTATUS, B.ESCALATIONOPTIONS,B.ESCALATEDTO,
       A.COMMENTS,
       /*
       REMOVALREASONCODE,
       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
       LASTREVIEWEDDATE, ADDEDTOMARKALL,
       UPDATEMESSAGE,
       */
       A.USERCODE AS UPDATEDBY, TO_CHAR(A.UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
  FROM TB_RISKASSESSCWFCOMMENTSLOG A
  LEFT OUTER JOIN tb_cmques_caseworkflowdetails B ON a.questionid = b.caseid
 WHERE A.QUESTIONID = i_vcCaseNo AND A.USERROLE = 'ROLE_CM_CHECKER' AND A.COMPASSREFNO = i_vcCompassRefNo 
 ORDER BY SEQUENCENO DESC;

 OPEN io_cuResultSet6 FOR
SELECT SEQUENCENO, USERCODE, USERROLE, IPADDRESS,
       A.CASESTATUS,
       COMMENTS,
       /*
       REMOVALREASONCODE,
       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
       LASTREVIEWEDDATE, ADDEDTOMARKALL,
       UPDATEMESSAGE,
       */
       USERCODE AS UPDATEDBY, TO_CHAR(UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
  FROM TB_RISKASSESSCWFCOMMENTSLOG A
 -- LEFT OUTER JOIN TB_CASESTATUSMASTER B ON A.CASESTATUS = B.CASESTATUS
 WHERE A.QUESTIONID = i_vcCaseNo AND A.COMPASSREFNO = i_vcCompassRefNo 
 ORDER BY SEQUENCENO DESC;

ELSE

  OPEN io_cuResultSet1 FOR
SELECT 'CM_OFFICER^~^CM_MAKER^~^CM_CHECKER^~^COMMENTSLOG' TABNAMES
  FROM DUAL;

  OPEN io_cuResultSet2 FOR
SELECT 'D^~^D^~^D^~^T' TABDISPLAY
  FROM DUAL;

 OPEN io_cuResultSet3 FOR
SELECT SEQUENCENO, USERCODE, USERROLE, IPADDRESS,
       A.CASESTATUS,
       COMMENTS, 
       /*
       REMOVALREASONCODE,
       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
       LASTREVIEWEDDATE, ADDEDTOMARKALL,
       UPDATEMESSAGE,
       */
       USERCODE AS UPDATEDBY, TO_CHAR(UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
  FROM TB_RISKASSESSCWFCOMMENTSLOG A
 WHERE A.CASENO = i_vcCaseNo AND A.USERROLE = 'ROLE_CM_OFFICER' AND A.COMPASSREFNO = i_vcCompassRefNo 
 ORDER BY SEQUENCENO DESC;

 OPEN io_cuResultSet4 FOR
SELECT A.* FROM
(
SELECT A.SEQUENCENO, A.USERCODE, A.USERROLE, A.IPADDRESS,
       A.CASESTATUS, B.ESCALATIONOPTIONS,B.ESCALATEDTO,
       A.COMMENTS,
       /*
       REMOVALREASONCODE,
       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
       LASTREVIEWEDDATE, ADDEDTOMARKALL,
       UPDATEMESSAGE,
       */
       A.USERCODE AS UPDATEDBY, TO_CHAR(A.UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
  FROM TB_RISKASSESSCWFCOMMENTSLOG A 
  LEFT OUTER JOIN tb_cmques_caseworkflowdetails B ON A.CASENO = B.CASENO
 WHERE A.CASENO = i_vcCaseNo
   AND A.USERROLE IN ('ROLE_CM_MAKER') AND A.COMPASSREFNO = i_vcCompassRefNo  -- ,'AMLUSERL3','36','37')
 --AND A.CASESTATUS NOT IN ('4','5','6','11','990','2000','2001')
-- UNION ALL
--SELECT SEQUENCENO, USERCODE, USERROLE, IPADDRESS,
--       A.CASESTATUS,
--       COMMENTS,
--       /*
--       REMOVALREASONCODE,
--       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
--       LASTREVIEWEDDATE, ADDEDTOMARKALL,
--       UPDATEMESSAGE,
--       */
--       UPDATEDBY, TO_CHAR(UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
--  FROM TB_RISKASSESSCWFCOMMENTSLOG A
--  --LEFT OUTER JOIN TB_CASESTATUSMASTER B ON A.CASESTATUS = B.CASESTATUS
-- WHERE A.CASENO = i_vcCaseNo
--   AND A.USERROLE IN ('ROLE_CM_CHECKER')
--   --AND A.CASESTATUS NOT IN ('4','5','6','11','990','36','37','51','10000000')
) A
 ORDER BY SEQUENCENO DESC;

  OPEN io_cuResultSet5 FOR
SELECT A.SEQUENCENO, A.USERCODE, A.USERROLE, A.IPADDRESS,
       A.CASESTATUS, B.ESCALATIONOPTIONS,B.ESCALATEDTO,
       A.COMMENTS,
       /*
       REMOVALREASONCODE,
       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
       LASTREVIEWEDDATE, ADDEDTOMARKALL,
       UPDATEMESSAGE,
       */
       A.USERCODE AS UPDATEDBY, TO_CHAR(A.UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
  FROM TB_RISKASSESSCWFCOMMENTSLOG A
  LEFT OUTER JOIN tb_cmques_caseworkflowdetails B ON A.CASENO = B.CASENO
 WHERE A.CASENO = i_vcCaseNo AND A.USERROLE = 'ROLE_CM_CHECKER' AND A.COMPASSREFNO = i_vcCompassRefNo 
 ORDER BY SEQUENCENO DESC;

 OPEN io_cuResultSet6 FOR
SELECT SEQUENCENO, USERCODE, USERROLE, IPADDRESS,
       A.CASESTATUS,
       COMMENTS,
       /*
       REMOVALREASONCODE,
       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
       LASTREVIEWEDDATE, ADDEDTOMARKALL,
       UPDATEMESSAGE,
       */
       USERCODE AS UPDATEDBY, TO_CHAR(UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
  FROM TB_RISKASSESSCWFCOMMENTSLOG A
 -- LEFT OUTER JOIN TB_CASESTATUSMASTER B ON A.CASESTATUS = B.CASESTATUS
 WHERE A.CASENO = i_vcCaseNo AND A.COMPASSREFNO = i_vcCompassRefNo 
 ORDER BY SEQUENCENO DESC;

-- OPEN io_cuResultSet7 FOR
--SELECT SEQUENCENO, USERCODE, USERROLE, IPADDRESS,
--       A.CASESTATUS,
--       COMMENTS,
--       UPDATEDBY, TO_CHAR(UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
--  FROM TB_CASEWORKFLOWCOMMENTSLOG A
--  --LEFT OUTER JOIN TB_CASESTATUSMASTER B ON A.CASESTATUS = B.CASESTATUS
-- WHERE A.CASENO = i_vcCaseNo
-- ORDER BY SEQUENCENO DESC;

END IF;
END IF;
IF(i_vcActionType IN ('escalateCase','checkerAction')) THEN

IF(i_vcCaseNo LIKE '%.%') THEN

 OPEN io_cuResultSet1 FOR
SELECT 'CM_OFFICER^~^CM_MAKER^~^CM_CHECKER^~^COMMENTSLOG' TABNAMES
  FROM DUAL;

  OPEN io_cuResultSet2 FOR
SELECT 'D^~^D^~^D^~^T' TABDISPLAY
  FROM DUAL;

 OPEN io_cuResultSet3 FOR
SELECT SEQUENCENO, USERCODE, USERROLE, IPADDRESS,
       A.CASESTATUS,

       A.COMMENTS, 
       /*
       REMOVALREASONCODE,
       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
       LASTREVIEWEDDATE, ADDEDTOMARKALL,
       UPDATEMESSAGE,
       */
       A.USERCODE AS UPDATEDBY, TO_CHAR(UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
  FROM TB_RISKASSESSCWFCOMMENTSLOG A
 WHERE A.QUESTIONID = i_vcCaseNo AND A.USERROLE = 'ROLE_CM_OFFICER' AND A.COMPASSREFNO = i_vcCompassRefNo 
 ORDER BY SEQUENCENO DESC;

 OPEN io_cuResultSet4 FOR
SELECT A.* FROM
(
SELECT A.SEQUENCENO, A.USERCODE, A.USERROLE, A.IPADDRESS,
       A.CASESTATUS, B.ESCALATIONOPTIONS,B.ESCALATEDTO,
       A.COMMENTS,
       /*
       REMOVALREASONCODE,
       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
       LASTREVIEWEDDATE, ADDEDTOMARKALL,
       UPDATEMESSAGE,
       */
       A.USERCODE AS UPDATEDBY, TO_CHAR(A.UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
  FROM TB_RISKASSESSCWFCOMMENTSLOG A
  LEFT OUTER JOIN tb_cmques_caseworkflowdetails B ON a.questionid = b.caseid
 WHERE A.QUESTIONID = i_vcCaseNo
   AND A.USERROLE IN ('ROLE_CM_MAKER') AND A.COMPASSREFNO = i_vcCompassRefNo  -- ,'AMLUSERL3','36','37')
 --AND A.CASESTATUS NOT IN ('4','5','6','11','990','2000','2001')
-- UNION ALL
--SELECT SEQUENCENO, USERCODE, USERROLE, IPADDRESS,
--       A.CASESTATUS,
--       COMMENTS,
--       /*
--       REMOVALREASONCODE,
--       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
--       LASTREVIEWEDDATE, ADDEDTOMARKALL,
--       UPDATEMESSAGE,
--       */
--       UPDATEDBY, TO_CHAR(UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
--  FROM TB_RISKASSESSCWFCOMMENTSLOG A
--  --LEFT OUTER JOIN TB_CASESTATUSMASTER B ON A.CASESTATUS = B.CASESTATUS
-- WHERE A.CASENO = i_vcCaseNo
--   AND A.USERROLE IN ('ROLE_CM_CHECKER')
--   --AND A.CASESTATUS NOT IN ('4','5','6','11','990','36','37','51','10000000')
) A
 ORDER BY SEQUENCENO DESC;

  OPEN io_cuResultSet5 FOR
SELECT A.SEQUENCENO, A.USERCODE, A.USERROLE, A.IPADDRESS,
       A.CASESTATUS, B.ESCALATIONOPTIONS,B.ESCALATEDTO,
       A.COMMENTS,
       /*
       REMOVALREASONCODE,
       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
       LASTREVIEWEDDATE, ADDEDTOMARKALL,
       UPDATEMESSAGE,
       */
       A.USERCODE AS UPDATEDBY, TO_CHAR(A.UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
  FROM TB_RISKASSESSCWFCOMMENTSLOG A
  LEFT OUTER JOIN tb_cmques_caseworkflowdetails B ON a.questionid = b.caseid
 WHERE A.QUESTIONID = i_vcCaseNo AND A.USERROLE = 'ROLE_CM_CHECKER' AND A.COMPASSREFNO = i_vcCompassRefNo 
 ORDER BY SEQUENCENO DESC;

 OPEN io_cuResultSet6 FOR
SELECT SEQUENCENO, USERCODE, USERROLE, IPADDRESS,
       A.CASESTATUS,
       COMMENTS,
       /*
       REMOVALREASONCODE,
       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
       LASTREVIEWEDDATE, ADDEDTOMARKALL,
       UPDATEMESSAGE,
       */
       USERCODE AS UPDATEDBY, TO_CHAR(UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
  FROM TB_RISKASSESSCWFCOMMENTSLOG A
 -- LEFT OUTER JOIN TB_CASESTATUSMASTER B ON A.CASESTATUS = B.CASESTATUS
 WHERE A.QUESTIONID = i_vcCaseNo AND A.COMPASSREFNO = i_vcCompassRefNo 
 ORDER BY SEQUENCENO DESC;

ELSE

  OPEN io_cuResultSet1 FOR
SELECT 'CM_OFFICER^~^CM_MAKER^~^CM_CHECKER^~^COMMENTSLOG' TABNAMES
  FROM DUAL;

  OPEN io_cuResultSet2 FOR
SELECT 'D^~^D^~^D^~^T' TABDISPLAY
  FROM DUAL;

 OPEN io_cuResultSet3 FOR
SELECT SEQUENCENO, USERCODE, USERROLE, IPADDRESS,
       A.CASESTATUS,
       COMMENTS, 
       /*
       REMOVALREASONCODE,
       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
       LASTREVIEWEDDATE, ADDEDTOMARKALL,
       UPDATEMESSAGE,
       */
       USERCODE AS UPDATEDBY, TO_CHAR(UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
  FROM TB_RISKASSESSCWFCOMMENTSLOG A
 WHERE A.CASENO = i_vcCaseNo AND A.USERROLE = 'ROLE_CM_OFFICER' AND A.COMPASSREFNO = i_vcCompassRefNo 
 ORDER BY SEQUENCENO DESC;

 OPEN io_cuResultSet4 FOR
SELECT A.* FROM
(
SELECT A.SEQUENCENO, A.USERCODE, A.USERROLE, A.IPADDRESS,
       A.CASESTATUS, B.ESCALATIONOPTIONS,B.ESCALATEDTO,
       A.COMMENTS,
       /*
       REMOVALREASONCODE,
       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
       LASTREVIEWEDDATE, ADDEDTOMARKALL,
       UPDATEMESSAGE,
       */
       A.USERCODE AS UPDATEDBY, TO_CHAR(A.UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
  FROM TB_RISKASSESSCWFCOMMENTSLOG A 
  LEFT OUTER JOIN tb_cmques_caseworkflowdetails B ON A.CASENO = B.CASENO
 WHERE A.CASENO = i_vcCaseNo
   AND A.USERROLE IN ('ROLE_CM_MAKER') AND A.COMPASSREFNO = i_vcCompassRefNo  -- ,'AMLUSERL3','36','37')
 --AND A.CASESTATUS NOT IN ('4','5','6','11','990','2000','2001')
-- UNION ALL
--SELECT SEQUENCENO, USERCODE, USERROLE, IPADDRESS,
--       A.CASESTATUS,
--       COMMENTS,
--       /*
--       REMOVALREASONCODE,
--       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
--       LASTREVIEWEDDATE, ADDEDTOMARKALL,
--       UPDATEMESSAGE,
--       */
--       UPDATEDBY, TO_CHAR(UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
--  FROM TB_RISKASSESSCWFCOMMENTSLOG A
--  --LEFT OUTER JOIN TB_CASESTATUSMASTER B ON A.CASESTATUS = B.CASESTATUS
-- WHERE A.CASENO = i_vcCaseNo
--   AND A.USERROLE IN ('ROLE_CM_CHECKER')
--   --AND A.CASESTATUS NOT IN ('4','5','6','11','990','36','37','51','10000000')
) A
 ORDER BY SEQUENCENO DESC;

  OPEN io_cuResultSet5 FOR
SELECT A.SEQUENCENO, A.USERCODE, A.USERROLE, A.IPADDRESS,
       A.CASESTATUS, B.ESCALATIONOPTIONS,B.ESCALATEDTO,
       A.COMMENTS,
       /*
       REMOVALREASONCODE,
       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
       LASTREVIEWEDDATE, ADDEDTOMARKALL,
       UPDATEMESSAGE,
       */
       A.USERCODE AS UPDATEDBY, TO_CHAR(A.UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
  FROM TB_RISKASSESSCWFCOMMENTSLOG A
  LEFT OUTER JOIN tb_cmques_caseworkflowdetails B ON A.CASENO = B.CASENO
 WHERE A.CASENO = i_vcCaseNo AND A.USERROLE = 'ROLE_CM_CHECKER'  AND A.COMPASSREFNO = i_vcCompassRefNo 
 ORDER BY SEQUENCENO DESC;

 OPEN io_cuResultSet6 FOR
SELECT SEQUENCENO, USERCODE, USERROLE, IPADDRESS,
       A.CASESTATUS,
       COMMENTS,
       /*
       REMOVALREASONCODE,
       OUTCOMEINDICATOR, HIGHRISKREASONCODE, ADDEDTOFALSEPOSITIVE,
       LASTREVIEWEDDATE, ADDEDTOMARKALL,
       UPDATEMESSAGE,
       */
       USERCODE AS UPDATEDBY, TO_CHAR(UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
  FROM TB_RISKASSESSCWFCOMMENTSLOG A
 -- LEFT OUTER JOIN TB_CASESTATUSMASTER B ON A.CASESTATUS = B.CASESTATUS
 WHERE A.CASENO = i_vcCaseNo AND A.COMPASSREFNO = i_vcCompassRefNo 
 ORDER BY SEQUENCENO DESC;

-- OPEN io_cuResultSet7 FOR
--SELECT SEQUENCENO, USERCODE, USERROLE, IPADDRESS,
--       A.CASESTATUS,
--       COMMENTS,
--       UPDATEDBY, TO_CHAR(UPDATETIMESTAMP,'DD/MM/YYYY HH24:MI') UPDATETIMESTAMP
--  FROM TB_CASEWORKFLOWCOMMENTSLOG A
--  --LEFT OUTER JOIN TB_CASESTATUSMASTER B ON A.CASESTATUS = B.CASESTATUS
-- WHERE A.CASENO = i_vcCaseNo
-- ORDER BY SEQUENCENO DESC;

END IF;

END IF;


END  STP_GETCMCASEWORKFLOWCOMMENTS;

------------------------------------------------------------------------------------------------------------

create or replace PROCEDURE "STP_GETRISKASSESSAPPROVEDRESP" 
(
  i_vcCaseNo          IN VARCHAR2,          i_vcStatus      		IN VARCHAR2,
  i_vcCaseId        	IN VARCHAR2,          i_vcUserCode        IN VARCHAR2, i_vcCompassRefNo      IN VARCHAR2,        
  i_vcUserRole            IN VARCHAR2,          i_vcIPAddress    		IN VARCHAR2,
  io_cuResultSet1         IN OUT SYS_REFCURSOR --  io_cuResultSet2  		IN OUT SYS_REFCURSOR
--io_cuResultSet3       IN OUT SYS_REFCURSOR
)

AS

  vcQuery VARCHAR2(5000);
  vcQuery1 VARCHAR2(5000);
  --vcStatus VARCHAR2(4) :='A';
BEGIN


OPEN io_cuResultSet1 FOR
SELECT CASENO,ASSIGNEDMAKERCODE,ESCALATEDTO,ESCALATIONOPTIONS,ESCALATIONREMARKS 
FROM   TB_CMQUES_CASEWORKFLOWDETAILS  
WHERE  CASEID = i_vcCaseId AND RFISTATUS = 'CO' AND COMPASSREFNO = i_vcCompassRefNo;
--WHERE  CASEID = i_vcCaseId AND COMPASSREFNO = i_vcCompassRefNo;

END STP_GETRISKASSESSAPPROVEDRESP;

------------------------------------------------------------------------------------------------------------




   
